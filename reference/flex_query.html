<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The UNFCCC provides access to National Inventory Reporting (NIR),
World Bank and Compilation and Accounting (CAD) data through its Data Interface.
Information on data availability is given here,
with the most current observations from 27 September, 2022 (as of 12 January, 2023).
The flex query API allows programmatically downloading NIR and World Bank data.
See the API's documentation for additional information at https://unfccc.int/process-and-meetings/transparency-and-reporting/greenhouse-gas-data/data-interface-help,
but note this refers to the GUI implementation.
The Flex Query API is made available in remis through flex_query().
Downloads require a combination of id values for:
Parties
Years
Variables


The corresponding steps for querying are then:
Identify a party of interest in rem_init()$parties, and note whether it is Annex-One
or Non-Annex-One, and extract the id.
Choose (a subset of) years based on the Annex-One or Non-Annex-One party in rem_init()$years.
Select variables from rem_init()$variables based on based on the Annex-One or Non-Annex-One party.
A helper function select_varid() allows narrowing down based on reporting categories,
classifications, measures, units and gasses (ccmug's).
See select_varid() for more information.
Selected variables can be contextualized further by using get_variables(), which
provides text representations of  ccmug id's.

"><title>Access the UNFCCC Data Interface using the Flex Query API — flex_query • remis</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Access the UNFCCC Data Interface using the Flex Query API — flex_query"><meta property="og:description" content="The UNFCCC provides access to National Inventory Reporting (NIR),
World Bank and Compilation and Accounting (CAD) data through its Data Interface.
Information on data availability is given here,
with the most current observations from 27 September, 2022 (as of 12 January, 2023).
The flex query API allows programmatically downloading NIR and World Bank data.
See the API's documentation for additional information at https://unfccc.int/process-and-meetings/transparency-and-reporting/greenhouse-gas-data/data-interface-help,
but note this refers to the GUI implementation.
The Flex Query API is made available in remis through flex_query().
Downloads require a combination of id values for:
Parties
Years
Variables


The corresponding steps for querying are then:
Identify a party of interest in rem_init()$parties, and note whether it is Annex-One
or Non-Annex-One, and extract the id.
Choose (a subset of) years based on the Annex-One or Non-Annex-One party in rem_init()$years.
Select variables from rem_init()$variables based on based on the Annex-One or Non-Annex-One party.
A helper function select_varid() allows narrowing down based on reporting categories,
classifications, measures, units and gasses (ccmug's).
See select_varid() for more information.
Selected variables can be contextualized further by using get_variables(), which
provides text representations of  ccmug id's.

"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">remis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/api-use.html">Interacting with the UNFCCC API using remis</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/the-Hull/remis/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Access the UNFCCC Data Interface using the Flex Query API</h1>
      <small class="dont-index">Source: <a href="https://github.com/the-Hull/remis/blob/HEAD/R/api.R" class="external-link"><code>R/api.R</code></a></small>
      <div class="d-none name"><code>flex_query.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The UNFCCC provides access to National Inventory Reporting (NIR),
World Bank and Compilation and Accounting (CAD) data through its Data Interface.
Information on data availability is given <a href="https://unfccc.int/process-and-meetings/transparency-and-reporting/greenhouse-gas-data/notes-on-ghg-data" class="external-link">here</a>,
with the most current observations from 27 September, 2022 (as of 12 January, 2023).</p>
<p>The flex query API allows programmatically downloading NIR and World Bank data.
See the API's documentation for additional information at <a href="https://unfccc.int/process-and-meetings/transparency-and-reporting/greenhouse-gas-data/data-interface-help" class="external-link">https://unfccc.int/process-and-meetings/transparency-and-reporting/greenhouse-gas-data/data-interface-help</a>,
but note this refers to the GUI implementation.
The Flex Query API is made available in <code>remis</code> through <code>flex_query()</code>.
Downloads require a combination of <code>id</code> values for:</p><ol><li><p>Parties</p></li>
<li><p>Years</p></li>
<li><p>Variables</p></li>
</ol><p>The corresponding steps for querying are then:</p><ol><li><p>Identify a party of interest in <code><a href="rem_init.html">rem_init()</a></code><code>$parties</code>, and note whether it is Annex-One
or Non-Annex-One, and extract the <code>id</code>.</p></li>
<li><p>Choose (a subset of) years based on the Annex-One or Non-Annex-One party in <code><a href="rem_init.html">rem_init()</a></code><code>$years</code>.</p></li>
<li><p>Select variables from <code><a href="rem_init.html">rem_init()</a></code><code>$variables</code> based on based on the Annex-One or Non-Annex-One party.
A helper function <code><a href="select_varid.html">select_varid()</a></code> allows narrowing down based on reporting categories,
classifications, measures, units and gasses (<em>ccmug</em>'s).
See <code><a href="select_varid.html">select_varid()</a></code> for more information.
Selected variables can be contextualized further by using <code><a href="get_variables.html">get_variables()</a></code>, which
provides text representations of  <em>ccmug</em> id's.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">flex_query</span><span class="op">(</span></span>
<span>  <span class="va">rms</span>,</span>
<span>  <span class="va">variable_ids</span>,</span>
<span>  <span class="va">party_ids</span>,</span>
<span>  <span class="va">year_ids</span>,</span>
<span>  path <span class="op">=</span> <span class="st">"api/records/flexible-queries/"</span>,</span>
<span>  pretty <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>rms</dt>
<dd><p>list, object from <code><a href="rem_init.html">rem_init()</a></code>.</p></dd>


<dt>variable_ids</dt>
<dd><p>numeric, <code>variableId</code>s of interest</p></dd>


<dt>party_ids</dt>
<dd><p>numeric, <code>partyId</code>s of interest</p></dd>


<dt>year_ids</dt>
<dd><p>numeric, <code>yearId</code>s of interest</p></dd>


<dt>path</dt>
<dd><p>character, default is 'api/records/flexible-queries/'</p></dd>


<dt>pretty</dt>
<dd><p>logical, should <code>id</code>s be transformed to text
descriptions?</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>data.frame with several <code>id</code> columns (either text or integers), and
results as <code>number_value</code> or <code>string_value</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">rem</span> <span class="op">&lt;-</span> <span class="fu"><a href="rem_init.html">rem_init</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/parties/</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/years/single</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/dimension-instances/category</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/dimension-instances/classification</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/dimension-instances/measure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/dimension-instances/gas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/conversion/fq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/variables/fq/annexOne</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> parsing api/variables/fq/nonAnnexOne</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cat1A1a</span> <span class="op">&lt;-</span> <span class="va">rem</span><span class="op">$</span><span class="va">categories</span><span class="op">$</span><span class="va">annexOne</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"1.A.1.a."</span>, <span class="va">rem</span><span class="op">$</span><span class="va">categories</span><span class="op">$</span><span class="va">annexOne</span><span class="op">$</span><span class="va">name</span><span class="op">)</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># manually choose id</span></span></span>
<span class="r-in"><span><span class="co"># cat1A1a$id[1]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get variables</span></span></span>
<span class="r-in"><span><span class="va">cat1A1a_variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_variables.html">get_variables</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  rms <span class="op">=</span> <span class="va">rem</span>,</span></span>
<span class="r-in"><span>  <span class="fu"><a href="select_varid.html">select_varid</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  vars <span class="op">=</span> <span class="va">rem</span><span class="op">$</span><span class="va">variables</span><span class="op">$</span><span class="va">annexOne</span>,</span></span>
<span class="r-in"><span>  <span class="va">cat1A1a</span><span class="op">$</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">$</span><span class="va">variableId</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#choose id:</span></span></span>
<span class="r-in"><span><span class="va">var_id</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">cat1A1a_variables</span>,</span></span>
<span class="r-in"><span>  <span class="va">classificationId</span> <span class="op">==</span> <span class="st">'Total for category'</span>,</span></span>
<span class="r-in"><span>         <span class="va">measureId</span> <span class="op">==</span> <span class="st">'Aggregate GHGs'</span></span></span>
<span class="r-in"><span>  <span class="op">)</span><span class="op">$</span><span class="va">variableId</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># download data</span></span></span>
<span class="r-in"><span><span class="va">cat1A1a_agg_ghg</span> <span class="op">&lt;-</span> <span class="fu">flex_query</span><span class="op">(</span></span></span>
<span class="r-in"><span>  rms <span class="op">=</span> <span class="va">rem</span>,</span></span>
<span class="r-in"><span>  variable_ids <span class="op">=</span> <span class="va">var_id</span>,</span></span>
<span class="r-in"><span>  party_ids <span class="op">=</span> <span class="fl">13</span>, <span class="co"># Germany</span></span></span>
<span class="r-in"><span>  year_ids <span class="op">=</span> <span class="va">rem</span><span class="op">$</span><span class="va">years</span><span class="op">$</span><span class="va">annexOne</span><span class="op">$</span><span class="va">id</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in flex_query(rms = rem, variable_ids = var_id, party_ids = 13,     year_ids = rem$years$annexOne$id):</span> Please provide numeric id's for: variableIds</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Alexander Hurley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

